# VCN forwarding rule
# To SSH to an instance via a bastion use:
#   ssh <instance fqdn>
# eg.
#   ssh inst-v0tll-dply-svc-api-beta-ad1.phx.deploybeta.oraclevcn.com
#
#   ssh <private ip>.<Host for bastion>
# eg.
#   ssh 10.2.0.5.dev-phx-bastion
# StrictHostKeyChecking disabled because our IPs are not globally unique
#
# Ssh with the fqdn will resolve to the <private ip>.<Host for bastion> format (HostName)
# It will then resolve the bastion ip address and tunnel to that first
# Once that is successful it will tunnel from bastion host to actual instance using the private ip

Host *.oraclevcn.com
	CanonicalizeHostname yes
	CanonicalizeFallbackLocal no


# deployment_service_management_plane_api
Host inst-cib4e-dply-svc-mgmt-plne-api-beta-ad1.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.6.dev-phx-bastion

Host inst-bxuws-dply-svc-mgmt-plne-api-beta-ad2.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.5.dev-phx-bastion

Host inst-kz1xc-dply-svc-mgmt-plne-api-beta-ad3.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.7.dev-phx-bastion


# deployment_service_data_plane_worker
Host inst-fwhfe-dply-svc-data-plne-wrkr-beta-ad1.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.2.dev-phx-bastion

Host inst-wszt1-dply-svc-data-plne-wrkr-beta-ad2.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.3.dev-phx-bastion

Host inst-fwgjd-dply-svc-data-plne-wrkr-beta-ad3.phx.deploybeta.oraclevcn.com
  HostName 10.2.0.4.dev-phx-bastion


# deployment_service_control_plane_worker
Host inst-qleb8-dply-svc-ctrl-plne-wrkr-beta-ad1.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.5.dev-phx-bastion

Host inst-7mc8a-dply-svc-ctrl-plne-wrkr-beta-ad2.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.6.dev-phx-bastion

Host inst-aehhn-dply-svc-ctrl-plne-wrkr-beta-ad3.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.7.dev-phx-bastion


# deployment_service_conrol_plane_api
Host inst-pho7g-dply-svc-ctrl-plne-api-beta-ad1.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.2.dev-phx-bastion

Host inst-2pfsc-dply-svc-ctrl-plne-api-beta-ad2.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.3.dev-phx-bastion

Host inst-w9nki-dply-svc-ctrl-plne-api-beta-ad3.phx.deploybeta.oraclevcn.com
  HostName 10.0.0.4.dev-phx-bastion


Host 10.*-bastion
  ProxyCommand ssh -v -W $(echo %h | cut -d. -f1-4):%p $(echo %h | cut -d. -f5)
  StrictHostKeyChecking no
  UserKnownHostsFile /dev/null

# deployment_bastion_beta
Host dev-phx-bastion ob3-jump-instance.ob3jump.ob3jump.oraclevcn.com
  HostName 172.16.105.226
  ForwardAgent yes
  ProxyCommand ssh vcn16.ob.us-phoenix-1.oci.oraclecloud.com -W %h:%p
